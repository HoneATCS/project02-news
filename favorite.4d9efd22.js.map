{"mappings":"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","sources":["src/js/currentLink.js","src/js/changeStatusNews.js","src/js/pages/favorite.js"],"sourcesContent":["const links = document.querySelectorAll('.navigation-list__link');\n\nexport default function setNewActiveLink() {\n  const links = document.querySelectorAll('.navigation-list__link');\n  links.forEach(link => {\n    if (link.classList.contains('navigation-list__link--current'))\n      link.classList.remove('navigation-list__link--current');\n    let currentHref = window.location.href;\n    if (currentHref.includes(link.getAttribute('href')))\n      link.classList.add('navigation-list__link--current');\n  });\n}\n","import LocalStorageService from '../js/localStorage';\nconst HAVE_READ = 'have-read-id';\nconst FAVORITES_NEWS = 'favorite-news';\nlet haveReadArray = [];\nlet favoritesNewsArray = [];\n\nconst localStorageService = new LocalStorageService();\n\nexport default function changeStatusNews(normalizedData) {\n  setDefaultParams(normalizedData);\n  saveHaveReadNews(normalizedData);\n  saveFavoriteNews(normalizedData);\n  return removeFavoriteNews(normalizedData);\n}\n\nfunction saveHaveReadNews(normalizedData) {\n  let haveReadData = localStorageService.load(HAVE_READ);\n\n  let newsId = []\n\n  const currentDate = new Date().getTime();\n\n  const readMoreButtons = document.querySelectorAll('.read-more');\n  let readMoreArray = Array.from(readMoreButtons);\n\n  readMoreArray.map(readMoreLink => {\n    readMoreLink.addEventListener('click', event => {\n      haveReadData = localStorageService.load(HAVE_READ);\n\n      if (haveReadData) {\n        haveReadData.map(newsObject => {\n          newsId.push(newsObject.id)\n        })\n      }\n        \n      const haveReadStatus =\n        event.target.parentNode.parentNode.parentNode.firstElementChild;\n      haveReadStatus.style.display = 'block';\n\n      const parentLi = event.target.parentNode.parentNode.parentNode.parentNode;\n      const parentLiId = parentLi.dataset.idNews;\n      const isIncludeId = newsId.includes(parentLiId);\n  \n      if (!isIncludeId) {\n        normalizedData.map(element => {\n          if (String(element.id_news) === parentLiId) {\n            const haveReadObj = {\n              id: parentLiId,\n              abstract: element.abstract,\n              page_url: element.page_url,\n              photo_url: element.photo_url,\n              published_date: element.published_date,\n              section: element.section,\n              title: element.title,\n              date: currentDate,\n            };\n            haveReadArray.push(haveReadObj);\n            localStorageService.save(HAVE_READ, haveReadArray);\n          }\n        });\n      }\n    });\n  });\n}\n\nfunction saveFavoriteNews(normalizedData) {\n  const addFavoriteButtons = document.querySelectorAll('.add-status-js');\n\n  let favoriteButtonsArray = Array.from(addFavoriteButtons);\n\n  favoriteButtonsArray.map(addButtonHTML => {\n    addButtonHTML.addEventListener('click', event => {\n      const addButton = event.target;\n      const removeButton = addButton.nextElementSibling;\n      const parentLi = addButton.parentNode.parentNode;\n      const parentLiId = parentLi.dataset.idNews;\n\n      addButton.style.display = 'none';\n      removeButton.style.display = 'block';\n\n      normalizedData.map(element => {\n        if (String(element.id_news) === parentLiId) {\n          favoritesNewsArray.push(element);\n          localStorageService.save(FAVORITES_NEWS, favoritesNewsArray);\n        }\n      });\n    });\n  });\n}\n\nfunction removeFavoriteNews(normalizedData) {\n  const removeFavoriteButtons = document.querySelectorAll('.remove-status-js');\n  let removeFavoriteButtonsArray = Array.from(removeFavoriteButtons);\n\n  let favoriteNewsID = [];\n\n  favoritesNewsArray = localStorageService.load(FAVORITES_NEWS) || [];\n  if (favoritesNewsArray.length !== 0) {\n    favoritesNewsArray.map(item => {\n      favoriteNewsID.push(item.id_news);\n    });\n  }\n\n  removeFavoriteButtonsArray.map(removeButtonHTML => {\n    removeButtonHTML.addEventListener('click', event => {\n      const removeButton = event.target;\n      const addButton = removeButton.previousElementSibling;\n      const parentLi = removeButton.parentNode.parentNode;\n      const parentLiId = parentLi.dataset.idNews;\n\n      addButton.style.display = 'block';\n      removeButton.style.display = 'none';\n\n      normalizedData.map(element => {\n        if (String(element.id_news) === parentLiId) {\n          const index = favoriteNewsID.indexOf(element.id_news);\n          favoritesNewsArray.splice(index, 1);\n          localStorageService.save(FAVORITES_NEWS, favoritesNewsArray);\n        }\n      });\n    });\n  });\n}\n\nfunction setDefaultParams(normalizedData) {\n  const favoriteNews = localStorageService.load(FAVORITES_NEWS);\n  const haveRead = localStorageService.load(HAVE_READ);\n\n  let haveReadId = [];\n\n  if (haveRead) {\n    haveRead.map(haveReadItem => {\n      haveReadId.push(haveReadItem.id);\n    });\n  }\n\n  let favoriteNewsID = [];\n\n  if (favoriteNews) {\n    favoriteNews.map(item => {\n      favoriteNewsID.push(item.id_news);\n    });\n    normalizedData.map(element => {\n      const isFavorite = favoriteNewsID.includes(element.id_news);\n\n      if (isFavorite) {\n        const favoriteLi = document.querySelector(\n          `[data-id-news=\"${element.id_news}\"]`\n        );\n        const divTape = favoriteLi.firstElementChild;\n        const buttonAdd = divTape.querySelector('.add-status-js');\n        const buttonRemove = divTape.querySelector('.remove-status-js');\n\n        buttonAdd.style.display = 'none';\n        buttonRemove.style.display = 'block';\n      }\n\n      const isHaveRead = haveReadId.includes(String(element.id_news));\n\n      if (isHaveRead) {\n        const haveReadLi = document.querySelector(\n          `[data-id-news=\"${element.id_news}\"]`\n        );\n        const divTape = haveReadLi.firstElementChild;\n        const haveReadStatus = divTape.querySelector('.status-reed');\n\n        haveReadStatus.style.display = 'block';\n      }\n    });\n  }\n}\n","import setNewActiveLink from '../currentLink';\nimport changeTheme from '../changeTheme';\nimport LocalStorageService from '../localStorage';\nimport changeStatusNews from '../changeStatusNews';\nimport { renderNews, createCardNotFound, clearMarkupNews } from '../renderNews';\nimport { refs } from '../refs';\nrefs.containerCardEl.addEventListener('click', onClick);\nconst localStorageService = new LocalStorageService();\nconst favoriteNews = localStorageService.load(\n  localStorageService.FAVORITES_NEWS\n);\n\nsetNewActiveLink();\nchangeTheme();\nclearMarkupNews();\ncreateFavoriteNews(favoriteNews);\n\nfunction onClick(evt) {\n  if (evt.target.nodeName === 'BUTTON') location.reload();\n}\n\nfunction createFavoriteNews(favoriteNews) {\n  if (!favoriteNews || favoriteNews?.length === 0) {\n    createCardNotFound();\n    return;\n  }\n  renderNews(favoriteNews);\n  changeStatusNews(favoriteNews);\n}\n"],"names":["document","querySelectorAll","$a79beb69995e5452$var$HAVE_READ","$UL92Z","parcelRequire","$a79beb69995e5452$var$FAVORITES_NEWS","$a79beb69995e5452$var$haveReadArray","$a79beb69995e5452$var$favoritesNewsArray","$a79beb69995e5452$var$localStorageService","default","$a79beb69995e5452$export$2e2bcd8739ae039","normalizedData","favoriteNews","load","haveRead","haveReadId","map","haveReadItem","push","id","favoriteNewsID","item","id_news","element","includes","divTape","querySelector","concat","firstElementChild","buttonAdd","buttonRemove","style","display","String","$a79beb69995e5452$var$setDefaultParams","haveReadData","newsId","currentDate","Date","getTime","readMoreButtons","Array","from","readMoreLink","addEventListener","event","newsObject","target","parentNode","parentLiId","dataset","idNews","haveReadObj","abstract","page_url","photo_url","published_date","section","title","date","save","$a79beb69995e5452$var$saveHaveReadNews","addFavoriteButtons","addButtonHTML","addButton","removeButton","nextElementSibling","$a79beb69995e5452$var$saveFavoriteNews","removeFavoriteButtons","removeFavoriteButtonsArray","length","removeButtonHTML","previousElementSibling","index","indexOf","splice","$a79beb69995e5452$var$removeFavoriteNews","refs","containerCardEl","evt","nodeName","location","reload","$f232087f2eb0250b$var$localStorageService","$f232087f2eb0250b$var$favoriteNews","FAVORITES_NEWS","forEach","link","classList","contains","remove","window","href","getAttribute","add","$3jSZ7","$jrRl1","clearMarkupNews","favoriteNews1","createCardNotFound","renderNews","$f232087f2eb0250b$var$createFavoriteNews"],"version":3,"file":"favorite.4d9efd22.js.map"}