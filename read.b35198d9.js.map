{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SCAcC,SAASC,iBAAiB,0B,2CDMlCC,EAAsB,IAAI,EAAAJ,EAAAK,SCHhBH,SAASC,iBAAiB,0BAClCG,SAAQ,SAAAC,GACRA,EAAKC,UAAUC,SAAS,mCAC1BF,EAAKC,UAAUE,OAAO,kCACNC,OAAOC,SAASC,KAClBC,SAASP,EAAKQ,aAAa,UACzCR,EAAKC,UAAUQ,IAAI,iC,KDDzB,EAAAC,EAAAZ,WAEA,IAkDQa,EAjDFC,EAAWf,EAAoBgB,KADnB,gBAEdD,GAAYA,EAASE,OAAS,EAOlC,SAA8BC,GAC5B,IAAMC,EAAgBrB,SAASsB,cAAc,mBAC/BC,OAAOC,KAAKJ,GACpBhB,SAAQ,SAAAqB,GACZ,IAAMC,EAAQ,yDAGTC,OAHkEF,EAAI,2FAG5CE,OAAXP,EAAKK,GASxBG,KAAI,SAAAC,GACH,OAAO,EAAAC,EAAA3B,SAAW0B,E,IAEnBE,KAAK,IAZyB,uBAE/BV,EAAcW,mBAAmB,YAAaN,E,IAclD,WACE,IACIO,EADEC,EAAMlC,SAASmC,uBAAuB,aAG5C,IAAKF,EAAI,EAAGA,EAAIC,EAAIf,OAAQc,IAC1BC,EAAID,GAAGG,iBAAiB,SAAS,WAC/BC,KAAK/B,UAAUgC,OAAO,UACtB,IAAIZ,EAAQW,KAAKE,mBACW,UAAxBb,EAAMc,MAAMC,QACdf,EAAMc,MAAMC,QAAU,OAEtBf,EAAMc,MAAMC,QAAU,O,IAvB5BC,E,CAhBAC,EA8CM3B,EAAS,GA/C+BC,EAiDzCb,SAAQ,SAAAqB,GACX,IAAMmB,EAAO,IAAIC,KAAKpB,EAAImB,MACvBE,cACAC,MAAM,KAAK,GACXA,MAAM,KACNhB,KAAK,KACJa,KAAQ5B,EACVA,EAAO4B,GAAMI,KAAKvB,GAElBT,EAAO4B,GAAQ,IAAIK,MAAMxB,E,IAGtBT,KA1DP,EAAAkC,EAAAC,qB","sources":["src/js/pages/read.js","src/js/currentLink.js"],"sourcesContent":["import LocalStorageService from '../localStorage';\nimport setNewActiveLink from '../currentLink';\nimport changeTheme from '../changeTheme';\nimport { createCardNotFound } from '../renderNews';\nimport markupCard from '../markupCard';\n\nconst localStorageService = new LocalStorageService();\nsetNewActiveLink();\nchangeTheme();\n\nconst lsNewsKey = 'have-read-id';\nconst readNews = localStorageService.load(lsNewsKey);\nif (readNews && readNews.length > 1) {\n  const groupedNewsByReadDate = groupByReadDate(readNews);\n  renderExpansionPanel(groupedNewsByReadDate);\n} else {\n  createCardNotFound();\n}\n\nfunction renderExpansionPanel(data) {\n  const readContainer = document.querySelector('#read-container');\n  const dates = Object.keys(data);\n  dates.forEach(val => {\n    const panel = `<button class=\"accordion\"><div class=\"accordion-date\">${val}</div></button>\n      <div class=\"panel\">\n       <ul class=\"news-container\">\n       ${renderReadNews(data[val])}</ul>\n      </div>`;\n    readContainer.insertAdjacentHTML('beforeend', panel);\n  });\n  applyAccordion();\n}\n\nfunction renderReadNews(news) {\n  let cards = news\n    .map(Data => {\n      return markupCard(Data);\n    })\n    .join('');\n  return cards;\n}\n\nfunction applyAccordion() {\n  const acc = document.getElementsByClassName('accordion');\n  var i;\n\n  for (i = 0; i < acc.length; i++) {\n    acc[i].addEventListener('click', function () {\n      this.classList.toggle('active');\n      var panel = this.nextElementSibling;\n      if (panel.style.display === 'block') {\n        panel.style.display = 'none';\n      } else {\n        panel.style.display = 'block';\n      }\n    });\n  }\n}\n\nfunction groupByReadDate(data) {\n  const groups = {};\n\n  data.forEach(val => {\n    const date = new Date(val.date)\n      .toISOString()\n      .split('T')[0]\n      .split('-')\n      .join('/');\n    if (date in groups) {\n      groups[date].push(val);\n    } else {\n      groups[date] = new Array(val);\n    }\n  });\n  return groups;\n}\n","const links = document.querySelectorAll('.navigation-list__link');\n\nexport default function setNewActiveLink() {\n  const links = document.querySelectorAll('.navigation-list__link');\n  links.forEach(link => {\n    if (link.classList.contains('navigation-list__link--current'))\n      link.classList.remove('navigation-list__link--current');\n    let currentHref = window.location.href;\n    if (currentHref.includes(link.getAttribute('href')))\n      link.classList.add('navigation-list__link--current');\n  });\n}\n"],"names":["$UL92Z","parcelRequire","document","querySelectorAll","$8044f29029ef98c0$var$localStorageService","default","forEach","link","classList","contains","remove","window","location","href","includes","getAttribute","add","$3jSZ7","groups","$8044f29029ef98c0$var$readNews","load","length","data","readContainer","querySelector","Object","keys","val","panel","concat","map","Data","$llhWr","join","insertAdjacentHTML","i","acc","getElementsByClassName","addEventListener","this","toggle","nextElementSibling","style","display","$8044f29029ef98c0$var$applyAccordion","$8044f29029ef98c0$var$renderExpansionPanel","date","Date","toISOString","split","push","Array","$jrRl1","createCardNotFound"],"version":3,"file":"read.b35198d9.js.map"}